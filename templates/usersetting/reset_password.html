{% extends "index.html" %}
{% block mainContent %}
{% load staticfiles %}
    {% if msg %}
        <div class="message_back">
        {{ msg }} Please click <a href="{% url 'usersetting:home' %}">login</a> to login AppsWalk.
        </div>
    {% else %}
        <div class="errors_block">
            {{ error_msg }}
        </div>
        <div id="central_block">
            <div class="central_section">
               <form action="" method='post' class="pull-right">
                {% csrf_token %}
                <table class="user_register">
                 <tr>
                     <td>Password</td>
                     <td><input id="id_password" name="password" type="password" /></td>
                 </tr>
                 <tr>
                     <td>Confirm Password</td>
                     <td><input id="id_confirm_password" name="confirm_password" type="password" /></td>
                 </tr>
                 <tr>
                     <td></td>
                     <td><button id="submit" class="newbutton" type="submit">submit</button></td>
                 </tr>
                </table>
              </form>
            </div>
        </div>
    {% endif %}
<script type="text/javascript" language="javascript">
    $("#submit").click(function() {
        var password = $("#id_password").val();
        var confirm_password = $("#id_confirm_password").val();
        if (password == "") {
            $(".errors_block").html("Password is required.");//TODO:it will be set in message.properties.
            return false;
        }
        if (password.length < 6) {
            $(".errors_block").html("Password length must be more than 6.");//TODO:it will be set in message.properties.
            return false;
        }
        if (confirm_password == "") {
            $(".errors_block").html("Confirm Password is required.");//TODO:it will be set in message.properties.
            return false;
        }
        if (confirm_password.length < 6) {
            $(".errors_block").html("Confirm password length must be more than 6.");//TODO:it will be set in message.properties.
            return false;
        }
        if (password != confirm_password) {
            $(".errors_block").html("Password is not the same with confirm password.");
            return false;
        }
        if (username.indexOf("@") != -1 && !valid_email(username)) {
            $(".errors_block").html("Email is not correct.");//TODO:it will be set in message.properties.
            return false;
        }
    });
</script>
{% endblock %}