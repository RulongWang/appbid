{% extends "index.html" %}
{% block mainContent %}
{% load staticfiles %}
       <div id="account_wrapper">
        <div class="pannel_nav">
            <h1>Account Settings</h1>
            <ul>

			<li class="selected"><a href="/account/setting/">Account Details</a></li>
			<li><a href="/account/public-profile/">Public Profile</a></li>
			<li><a href="/account/payment-setting/">Payment Setting</a></li>
			<li><a href="/account/email-setting/">Email Preferences</a></li>
            <li><a href="/account/change-password/">Change Password</a></li>
            <li><a href="/account/social-setting/">Social Network</a></li>
          </ul>
        </div>

        <div class="account_details">
               {% block account_detail %}
                   <div id="account_msg" style="color: green">
                        {{ account_msg }}
                   </div>
                   <fieldset>
                    <legend>Account Details</legend>
                    <form action=""  method="post">
                    {% csrf_token %}
                            <ul class="account_detail_items">
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.user.errors }}
                                        <div class="field_label" >{{ form.user.label_tag }}</div>
                                        <div class="field_value" >
                                            {{ form.user }}
                                            <input id="username" name="username" value="{{ request.user.username }}" readonly="true"/>
                                        </div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.birthday.errors }}
                                        <div class="field_label" >{{ form.birthday.label_tag }}</div><div class="field_value" > {{ form.birthday }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.real_name.errors }}
                                        <div class="field_label" >{{ form.real_name.label_tag }}</div><div class="field_value" > {{ form.real_name }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.real_name.errors }}
                                        <div class="field_label" >{{ form.phone_number.label_tag }}</div><div class="field_value" > {{ form.phone_number }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.street_address.errors }}
                                        <div class="field_label" >{{ form.street_address.label_tag }}</div><div class="field_value" > {{ form.street_address }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.city.errors }}
                                        <div class="field_label" >{{ form.city.label_tag }}</div><div class="field_value" > {{ form.city }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.state_provience.errors }}
                                        <div class="field_label" >{{ form.state_provience.label_tag }}</div><div class="field_value" > {{ form.state_provience }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.post_code.errors }}
                                        <div class="field_label" >{{ form.post_code.label_tag }}</div><div class="field_value" > {{ form.post_code }}</div>
                                    </div>
                                    </li>
                                    <li>
                                    <div class="fieldWrapper">
                                        {{ form.country.errors }}
                                        <div class="field_label" >{{ form.country.label_tag }}</div><div class="field_value" > {{ form.country }}</div>
                                    </div>
                                    </li>
                                    <li>

                                </ul>
                                 <div><input id="submit" type="submit" value="Submit"  class="newbutton"/></div>
                    </form>
                </fieldset>
               {% endblock %}
        </div>
       </div>
<script type="text/javascript" language="javascript">
    $("#submit").click(function() {
        var reg = new RegExp("^(?:(?:([0-9]{4}(-|\/)(?:(?:0?[1,3-9]|1[0-2])(-|\/)(?:29|30)|((?:0?[13578]|1[02])(-|\/)31)))|([0-9]{4}(-|\/)(?:0?[1-9]|1[0-2])(-|\/)(?:0?[1-9]|1\\d|2[0-8]))|(((?:(\\d\\d(?:0[48]|[2468][048]|[13579][26]))|(?:0[48]00|[2468][048]00|[13579][26]00))(-|\/)0?2(-|\/)29))))$");
        if ($("#id_birthday").val().trim() != "" && !reg.test($("#id_birthday").val())) {
            $("#account_msg").html("<ul><li>The birthday is not correct.</li></ul>");//TODO:it will be set in message.properties.
            return false;
        }
        if ($("#id_real_name").val().trim() != "" && $("#id_real_name").val().trim().length > 25) {
            $("#account_msg").html("<ul><li>The length of real name can not more than 25.</li></ul>");//TODO:it will be set in message.properties.
            return false;
        }
        var tel = /^[0-9]{6}$/;
        if ($("#id_post_code").val().trim() != "" && !tel.test($("#id_post_code").val().trim())) {
            $("#account_msg").html("<ul><li>Post code is not correct.</li></ul>");//TODO:it will be set in message.properties.
            return false;
        }
    });
</script>
{% endblock %}